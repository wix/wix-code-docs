{ "name": "Contacts",
  "memberOf": "wix-crm",
  "mixes": [],
  "labels":
    [ "new" ],
  "location":
    { "lineno": 1,
      "filename": "contacts-index.js" },
  "docs":
    { "summary": "The Contacts API is used to manage a site's contacts.",
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "appendOrCreateContact",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "contactInfo",
              "type": "wix-crm-backend.Contacts.ContactInfo",
              "doc": "Contact's information.\nTo reconcile with an existing contact,\na phone or email must be provided,\nor the current session identity must be attached to a contact or member.\n\nIf no existing contact can be found,\na new contact is created with the specified information." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-crm-backend.Contacts.ContactIdentification" ] },
            "doc": "" },
        "locations":
          [ { "lineno": 1,
              "filename": "appendOrCreateContact.js" } ],
        "docs":
          { "summary": "Appends a contact with a given email address or phone number, or creates a contact if it doesn't exist.",
            "description":
              [ "The `appendOrCreateContact()` function returns a Promise",
                "that resolves to a contact ID and identity type when a contact is found or created.",
                "",
                "> **Note:**",
                "> This function replaces the deprecated",
                "> `wixCrm.createContact()`.",
                "> The deprecated function will continue to work, but it will not receive updates.",
                "> To keep any existing code compatible with future changes, see the",
                "> [migration instructions](wix-crm/createcontact#migration-instructions).",
                "",
                "When called, `appendOrCreateContact()` accepts an object with contact information",
                "and follows these steps:",
                "",
                "1. `appendOrCreateContact()` tries to reconcile an existing contact with the specified email addresses and phone numbers (if provided) and the visitor's session identity.",
                "2. If no contact can be reconciled and an email address, phone number, or name are provided, a new contact is created.",
                "3. If no contact can be created, the Promise is rejected.",
                "",
                "`appendOrCreateContact()` does not require member authentication,",
                "so it does not return the entire contact object.",
                "The contact's data can be retrieved with",
                "[`getContact()`](wix-crm-backend/contacts-obj/getcontact)",
                "from `wix-crm-backend`.",
                "",
                "#### How the Data Is Handled",
                "",
                "If an **existing contact** is found:",
                "",
                "- The current visitor's session identity is associated with the contact, if it isn't already.",
                "- If a specified property is empty in the existing contact, the property is updated with the specified information.",
                "- Any arrays (such as `emails`, `addresses`, `phones`, and `labelKeys`) are updated with the specified information.",
                "- No existing data is overwritten or deleted.",
                "",
                "If a **new contact** is created:",
                "",
                "- The new contact's data is populated with the specified contact object.",
                "- The current visitor's session identity is associated with the contact." ],
            "links": [],
            "examples":
              [ { "title": "Append or create a contact with name",
                  "body":
                    [ "import { contacts } from \"wix-crm\";",
                      "",
                      "// ...",
                      "",
                      "const contactInfo = {",
                      "  name: {",
                      "    first: \"Art\",",
                      "    last: \"Vandelay\"",
                      "  }",
                      "};",
                      "",
                      "contacts.appendOrCreateContact(contactInfo)",
                      "  .then((resolvedContact) => {",
                      "    return resolvedContact;",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } },
                { "title": "Append or create a contact, full object",
                  "body":
                    [ "import { contacts } from \"wix-crm\";",
                      "",
                      "// ...",
                      "",
                      "const contactInfo = {",
                      "  name: {",
                      "    first: \"Art\",",
                      "    last: \"Vandelay\"",
                      "  },",
                      "  company: \"Vandelay Industries\",",
                      "  jobTitle: \"Importer/exporter\",",
                      "  locale: \"en-US\",",
                      "  birthdate: \"1959-09-23\",",
                      "  emails: [",
                      "    {",
                      "      tag: \"WORK\",",
                      "      email: \"art@vandelayindustries.io\",",
                      "      primary: true",
                      "    }",
                      "  ],",
                      "  phones: [",
                      "    {",
                      "      tag: \"WORK\",",
                      "      countryCode: \"US\",",
                      "      phone: \"212-718-6962\",",
                      "      primary: true",
                      "    }",
                      "  ],",
                      "  addresses: [",
                      "    {",
                      "      tag: \"HOME\",",
                      "      address: {",
                      "        country: \"US\",",
                      "        subdivision: \"NY\",",
                      "        city: \"New York\",",
                      "        postalCode: \"10011\",",
                      "        street: {",
                      "          streetAddress: {",
                      "            number: \"4311\",",
                      "            name: \"Stanley Avenue\"",
                      "          }",
                      "        },",
                      "        addressLine2: \"Apt 7\"",
                      "      }",
                      "    }",
                      "  ],",
                      "  labelKeys: [\"custom.incoming-leads\"],",
                      "  extendedFields: {",
                      "    \"custom.event-name\": \"KrameriCon\"",
                      "  }",
                      "};",
                      "",
                      "contacts.appendOrCreateContact(contactInfo)",
                      "  .then((resolvedContact) => {",
                      "    return resolvedContact;",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }